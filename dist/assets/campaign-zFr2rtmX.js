import{_ as s}from"./index-BamLPRPK.js";import{a as c}from"./axiosInstance-D6jcOrH_.js";import{u as d}from"./useQuery-CMmpEYOC.js";import{b as r,a as g}from"./baseUrl-HwsEoYQ5.js";const w=async(a,e)=>{const t=localStorage.getItem("business_id")||"",o=JSON.parse(t),n=s.loading("Creating campaign");await c({method:"post",url:`${r}/campaign/create/${o}/`,data:{name:a}}).then(i=>{s.success("Campaign name created",{id:n}),e(`/campaigns/new/${i.data.campaign_id}?type=form`)}).catch(()=>{s.error("Something went wrong. Please Retry",{id:n})})},y=async(a,e)=>{const t=s.loading("Uploading File..."),o=localStorage.getItem("business_id")||"",n=JSON.parse(o),i=new FormData;i.append("campaign",a),await c({method:"post",url:`${r}/campaign/upload/${n}/`,data:i}).then(p=>{s.success("File uploaded successfully",{id:t}),e(`/campaigns/new/${p.data.campaign_id}?type=upload`)}).catch(()=>{s.error("Please check the file and retry",{id:t})})},C=async(a,e)=>{const t=s.loading("Creating campaign"),o=localStorage.getItem("business_id")||"",n=JSON.parse(o);await c({method:"post",url:`${r}/campaign/create/${n}/`,data:{name:a}}).then(i=>{s.success("Campaign name created",{id:t}),e(`/campaigns/new/${i.data.campaign_id}?type=sheet`)}).catch(()=>{s.error("Something went wrong. Please Retry",{id:t})})},$=()=>{const a=localStorage.getItem("business_id")||"",e=JSON.parse(a);return d({queryKey:["Campaigns",e],queryFn:async()=>(await c({method:"get",url:`/campaigns/list/${e}/`})).data,staleTime:5*60*1e3})},I=a=>d({queryKey:["Campaign",a],queryFn:async()=>(await c({method:"get",url:`/leads/list/${a}`})).data,staleTime:5*60*1e3}),f=async(a,e,t,o)=>{const n=s.loading("Setting up follow up option");await c.put(`${r}/campaign/add/contact/${a}/`,{contact_option:e==="CALL"?e.toUpperCase():"Sms"}).then(()=>{s.success("Follow up method set",{id:n}),t(`/campaigns/new/${a}/${o}/${e.toLowerCase()}`)}).catch(()=>{s.error("Something went wrong. Please retry",{id:n})})},S=async(a,e,t,o)=>{const n=s.loading("Assigning audios to call");await c.put(`campaign/call/create/${e}/`,{audio_link_1:a[0],audio_link_2:a[1],audio_link_3:a[2]}).then(()=>{s.success("Audios assigned to calls",{id:n}),t(o==="upload"||o==="sheet"?"/app/campaigns":`/campaigns/new/form/${e}/wizard`)}).catch(()=>{s.error("Something went wrong. Please retry",{id:n})})},b=async a=>{const e=s.loading("Launching Campaigns");await c.post(`/campaign/call/launch/${a}/`).then(()=>{s.success("Campaign Started",{id:e})}).catch(()=>{s.error("Something went wrong. Please retry",{id:e})})},_=a=>d({queryKey:["leadInfo",a],queryFn:()=>g({url:`${r}/leads/detail/${a}/`}),select:t=>t.data});export{I as a,_ as b,y as c,w as d,C as e,f,S as g,b as l,$ as u};
