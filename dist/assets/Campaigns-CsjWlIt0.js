import{i as k,m as L,f as D,r as v,n as T,j as e,B as a,h as P,o as z,_ as h,p as A,l as E,L as _,e as F,E as I}from"./index-BmEbPKAO.js";import{F as V}from"./index-BKG93bDz.js";import{T as H,a as S,b as g,c as n,d as Y,e as r}from"./table-CEDGsAWc.js";import{I as B}from"./input-DLkXYEKk.js";import{P as M,a as Q,H as U,b as y}from"./popover-BPU0mxRE.js";import{c as $,a as q}from"./Codes-CJtqpzcM.js";import"./Combination-BpHwYojT.js";import"./index-DOuoiFe8.js";import"./component-ClC3MksJ.js";import"./floating-ui.react-dom-CeSWR-SN.js";function R({data:l}){const[i,b]=k({type:"",value:""}),N=L(),u=D(),[x,p]=v.useState(l),j=(s,t)=>{const m={...Object.fromEntries(i.entries()),[s]:t};b(m)};v.useEffect(()=>{(()=>{const t=i.get("type"),d=i.get("value");if(!t&&!d){p(l);return}const m=l==null?void 0:l.filter(c=>{if(!t&&d)return c.title.toLowerCase().includes(d.toLowerCase());if(!d&&t)return t.toLowerCase()===c.type_of.toLowerCase();if(d&&t)return t.toLowerCase()===c.type_of.toLowerCase()&&c.title.toLowerCase().includes(d.toLowerCase())});p(m)})()},[i,l]);const o=s=>{u(`/app/campaigns/${s}`)},{mutateAsync:w,isPending:C}=T(),f=s=>{const t=h.loading("Deleting Campaign");w(s).then(()=>{h.success("Campaign deleted successfully",{id:t}),N.invalidateQueries()}).catch(()=>{h.error("Unable to delete campaign",{id:t})})};return e.jsxs("div",{children:[e.jsxs("div",{className:"w-full flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"basis-1/4 flex items-center gap-2",children:[e.jsx("p",{className:"",children:"Filter by:"}),e.jsx(a,{variant:"outline",className:"p-0 h-auto",children:e.jsxs("select",{className:"bg-transparent outline-hidden h-10 px-2",onChange:s=>j("type",s.target.value),defaultValue:i.get("type")??"",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"direct",children:"Direct"}),e.jsx("option",{value:"upload",children:"Upload"})]})})]}),e.jsx(B,{type:"text",placeholder:"Search by campaign title...",className:"max-w-[300px]",defaultValue:i.get("value")||"",onChange:s=>j("value",s.target.value)}),e.jsx("div",{className:"basis-1/4 flex items-center justify-end gap-2"})]}),e.jsxs(H,{children:[e.jsx(S,{children:e.jsxs(g,{children:[e.jsx(n,{children:"ID"}),e.jsx(n,{children:"Title"}),e.jsx(n,{children:"Leads"}),e.jsx(n,{children:"Created At"}),e.jsx(n,{children:"Type"}),e.jsx(n,{children:"Contacted"}),e.jsx(n,{children:"Converted"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(Y,{children:x==null?void 0:x.map(s=>e.jsxs(g,{children:[e.jsx(r,{onClick:()=>o(s.id),children:s.id}),e.jsx(r,{onClick:()=>o(s.id),children:s.title}),e.jsx(r,{onClick:()=>o(s.id),children:s.leads}),e.jsx(r,{onClick:()=>o(s.id),children:P(s.created).format("MMM DD, YYYY hh:mm")}),e.jsx(r,{onClick:()=>o(s.id),children:s.type_of}),e.jsx(r,{onClick:()=>o(s.id),children:s.contacted_leads}),e.jsx(r,{onClick:()=>o(s.id),children:s.converted_leads}),e.jsx(r,{children:e.jsxs(M,{children:[e.jsx(Q,{children:e.jsx(a,{size:"sm",variant:"ghost",className:"my-2",children:e.jsx(U,{})})}),s.type_of.toLowerCase()==="upload"?e.jsxs(y,{className:"flex flex-col gap-3 w-max",children:[e.jsx(a,{variant:"outline",size:"sm",className:"rounded",onClick:()=>z(s.id),children:"Launch Campaign"}),e.jsx(a,{variant:"destructive",size:"sm",className:"rounded",disabled:C,onClick:()=>f(s.id),children:"Delete Campaign"})," "]}):e.jsxs(y,{className:"flex flex-col gap-3 w-max",children:[e.jsx(a,{variant:"outline",size:"sm",className:"rounded",onClick:()=>$(s.id),children:"Copy code as popup"}),e.jsx(a,{variant:"outline",size:"sm",className:"rounded",onClick:()=>q(s.id),children:"Copy code inline form"}),e.jsx(a,{variant:"outline",size:"sm",className:"rounded",onClick:()=>{u(`/campaigns/form/edit/${s.id}`)},children:"Edit Form"}),e.jsx(a,{variant:"outline",size:"sm",className:"rounded",onClick:()=>{u(`/campaigns/edit/${s.id}`)},children:"Edit Context"}),e.jsx(a,{variant:"destructive",size:"sm",className:"rounded",disabled:C,onClick:()=>f(s.id),children:"Delete Campaign"})]})]})})]},s.id))})]})]})}function te(){const{isLoading:l,data:i}=A();return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Campaigns",subtitle:"All your campaigns in one place",button:e.jsx(_,{to:"/campaigns/new",children:e.jsxs(a,{className:"pry-btn gap-1",children:[e.jsx(V,{})," Add New Campaign"]})})}),e.jsx("div",{className:"p-4 rounded-2xl bg-white",children:l?e.jsx("div",{className:"w-full h-[300px] flex items-center justify-center",children:e.jsx(F,{})}):(i==null?void 0:i.length)>0?e.jsx(R,{data:i}):e.jsx(I,{})})]})}export{te as default};
