import{c as k,r as l,j as t,_ as c}from"./index-BamLPRPK.js";import{a as j,b as f}from"./baseUrl-HwsEoYQ5.js";import{d as S}from"./index-Br7E-zC1.js";import"./iconBase-1Fq5GbpP.js";function G(){var p;const{campaign_id:s}=k();console.log(s),l.useEffect(()=>{},[]);const[r,C]=l.useState(null),[N,m]=l.useState(!1);l.useEffect(()=>{(async()=>{await j.get(`${f}/campaign/form-design/${s}/`).then(a=>{m(!1),C(JSON.parse(a.data.design))}).catch(a=>{m(!0),console.log(a)})})()},[]);const o=r==null?void 0:r.texts,e=r==null?void 0:r.styles,n=r==null?void 0:r.fields,d=(p=r==null?void 0:r.redirect)==null?void 0:p.url,[u,w]=l.useState(""),[g,F]=l.useState(""),[x,v]=l.useState(""),E=async i=>{if(i.preventDefault(),u.length<1||g.length<1||x.length<1)return c.error("Please fill the required fields");const a={full_name:u,email:g,phone_number:x},b=c.loading("Collecting your contact data");await j({method:"post",url:`${f}/lead/create/${s}/`,data:a}).then(h=>{console.log(h.data),c.success("You will be contacted within five minutes",{id:b}),d&&d.length>0&&(window.location=d)}).catch(h=>{c.error("Something went wrong. Please retry",{id:b}),console.log(h)})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"forms",style:{backgroundColor:(e==null?void 0:e.bgClr)||"inherit"},children:[t.jsx("div",{className:"form-close-msg",children:t.jsx("p",{children:"*Click outside to close form"})}),t.jsxs("form",{onSubmit:E,id:"form",children:[t.jsx("h2",{className:"h-100",style:{color:(e==null?void 0:e.textClr)||"inherit"},children:o==null?void 0:o.title}),t.jsx("p",{style:{color:(e==null?void 0:e.textClr)||"inherit"},children:o==null?void 0:o.subtitle}),t.jsxs("div",{className:"form__body",children:[(n==null?void 0:n.includes("fullName"))&&t.jsxs("label",{htmlFor:"fullName",children:[t.jsx("p",{style:{color:(e==null?void 0:e.textClr)||"inherit"},children:"Full Name"}),t.jsx("input",{style:{backgroundColor:(e==null?void 0:e.inputBG)||"inherit"},type:"text",name:"fullName",id:"fullName",placeholder:"e.g. John Doe",required:!0,onChange:i=>w(i.target.value)})]}),(n==null?void 0:n.includes("email"))&&t.jsxs("label",{htmlFor:"email",children:[t.jsx("p",{style:{color:(e==null?void 0:e.textClr)||"inherit"},children:"Email Address"}),t.jsx("input",{style:{backgroundColor:(e==null?void 0:e.inputBG)||"inherit"},type:"email",name:"email",id:"email",placeholder:"e.g. johndoe@mail.com",required:!0,onChange:i=>F(i.target.value)})]}),(n==null?void 0:n.includes("phone"))&&t.jsxs("label",{htmlFor:"phone",children:[t.jsx("p",{style:{color:(e==null?void 0:e.textClr)||"inherit"},children:"Phone Number"}),t.jsx("input",{style:{backgroundColor:(e==null?void 0:e.inputBG)||"inherit"},type:"text",name:"phone",id:"phone",placeholder:"e.g. 08111223344",required:!0,onChange:i=>v(i.target.value)})]}),(n==null?void 0:n.includes("location"))&&t.jsxs("label",{htmlFor:"location",children:[t.jsx("p",{style:{color:(e==null?void 0:e.textClr)||"inherit"},children:"Location"}),t.jsx("input",{style:{backgroundColor:(e==null?void 0:e.inputBG)||"inherit"},type:"text",name:"location",id:"location",placeholder:"e.g. Lagos, Nigeria",required:!0})]}),t.jsx("button",{id:"submitBtn",type:"submit",style:{backgroundColor:(e==null?void 0:e.btnBG)||"var(--pry-clr)",color:(e==null?void 0:e.btnTextClr)||"white"},children:(o==null?void 0:o.btnText)||"Contact Me"})]})]}),N&&t.jsx("div",{className:"w-screen h-screen fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-4 rounded-2xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(S,{className:"text-lg text-yellow-400"}),t.jsx("h1",{className:"text-lg font-semibold text-header",children:"Error"})]}),t.jsxs("p",{className:"text-sm",children:["Unable to fetch campaign form. Try reloading this page"," "]}),t.jsx("p",{className:"text-sm",children:"Contact this website's administrator if this issue persists"})]})})]})})}export{G as default};
