import{R,q as k,j as e,S as $,r as i,b as L,m as Ie,h as Re,B as H,E as ye,_ as A,s as we,t as Ne,e as Se,l as Ee}from"./index-BmEbPKAO.js";import{u as q,c as C,a as z,P as Fe}from"./Combination-BpHwYojT.js";import{c as O,u as Ae,P as E}from"./index-DOuoiFe8.js";import{T as _e,a as Me,b as Y,c as N,d as Pe,e as S}from"./table-CEDGsAWc.js";import{P as ke,a as De,H as Le,b as Oe}from"./popover-BPU0mxRE.js";import"./component-ClC3MksJ.js";import"./floating-ui.react-dom-CeSWR-SN.js";function Ge(t){const o=t+"CollectionProvider",[n,s]=O(o),[r,l]=n(o,{collectionRef:{current:null},itemMap:new Map}),c=j=>{const{scope:a,children:b}=j,T=R.useRef(null),f=R.useRef(new Map).current;return e.jsx(r,{scope:a,itemMap:f,collectionRef:T,children:b})};c.displayName=o;const m=t+"CollectionSlot",v=R.forwardRef((j,a)=>{const{scope:b,children:T}=j,f=l(m,b),x=k(a,f.collectionRef);return e.jsx($,{ref:x,children:T})});v.displayName=m;const u=t+"CollectionItemSlot",p="data-radix-collection-item",d=R.forwardRef((j,a)=>{const{scope:b,children:T,...f}=j,x=R.useRef(null),y=k(a,x),w=l(u,b);return R.useEffect(()=>(w.itemMap.set(x,{ref:x,...f}),()=>void w.itemMap.delete(x))),e.jsx($,{[p]:"",ref:y,children:T})});d.displayName=u;function g(j){const a=l(t+"CollectionConsumer",j);return R.useCallback(()=>{const T=a.collectionRef.current;if(!T)return[];const f=Array.from(T.querySelectorAll(`[${p}]`));return Array.from(a.itemMap.values()).sort((w,F)=>f.indexOf(w.ref.current)-f.indexOf(F.ref.current))},[a.collectionRef,a.itemMap])}return[{Provider:c,Slot:v,ItemSlot:d},g,s]}var Ke=i.createContext(void 0);function Q(t){const o=i.useContext(Ke);return t||o||"ltr"}var P="rovingFocusGroup.onEntryFocus",Ve={bubbles:!1,cancelable:!0},_="RovingFocusGroup",[D,J,Be]=Ge(_),[Ue,W]=O(_,[Be]),[$e,He]=Ue(_),X=i.forwardRef((t,o)=>e.jsx(D.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(D.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Ye,{...t,ref:o})})}));X.displayName=_;var Ye=i.forwardRef((t,o)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:v,onEntryFocus:u,preventScrollOnEntryFocus:p=!1,...d}=t,g=i.useRef(null),j=k(o,g),a=Q(l),[b=null,T]=q({prop:c,defaultProp:m,onChange:v}),[f,x]=i.useState(!1),y=Ae(u),w=J(n),F=i.useRef(!1),[ge,B]=i.useState(0);return i.useEffect(()=>{const h=g.current;if(h)return h.addEventListener(P,y),()=>h.removeEventListener(P,y)},[y]),e.jsx($e,{scope:n,orientation:s,dir:a,loop:r,currentTabStopId:b,onItemFocus:i.useCallback(h=>T(h),[T]),onItemShiftTab:i.useCallback(()=>x(!0),[]),onFocusableItemAdd:i.useCallback(()=>B(h=>h+1),[]),onFocusableItemRemove:i.useCallback(()=>B(h=>h-1),[]),children:e.jsx(E.div,{tabIndex:f||ge===0?-1:0,"data-orientation":s,...d,ref:j,style:{outline:"none",...t.style},onMouseDown:C(t.onMouseDown,()=>{F.current=!0}),onFocus:C(t.onFocus,h=>{const he=!F.current;if(h.target===h.currentTarget&&he&&!f){const U=new CustomEvent(P,Ve);if(h.currentTarget.dispatchEvent(U),!U.defaultPrevented){const M=w().filter(I=>I.focusable),je=M.find(I=>I.active),Te=M.find(I=>I.id===b),Ce=[je,Te,...M].filter(Boolean).map(I=>I.ref.current);te(Ce,p)}}F.current=!1}),onBlur:C(t.onBlur,()=>x(!1))})})}),Z="RovingFocusGroupItem",ee=i.forwardRef((t,o)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:l,...c}=t,m=z(),v=l||m,u=He(Z,n),p=u.currentTabStopId===v,d=J(n),{onFocusableItemAdd:g,onFocusableItemRemove:j}=u;return i.useEffect(()=>{if(s)return g(),()=>j()},[s,g,j]),e.jsx(D.ItemSlot,{scope:n,id:v,focusable:s,active:r,children:e.jsx(E.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...c,ref:o,onMouseDown:C(t.onMouseDown,a=>{s?u.onItemFocus(v):a.preventDefault()}),onFocus:C(t.onFocus,()=>u.onItemFocus(v)),onKeyDown:C(t.onKeyDown,a=>{if(a.key==="Tab"&&a.shiftKey){u.onItemShiftTab();return}if(a.target!==a.currentTarget)return;const b=Qe(a,u.orientation,u.dir);if(b!==void 0){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let f=d().filter(x=>x.focusable).map(x=>x.ref.current);if(b==="last")f.reverse();else if(b==="prev"||b==="next"){b==="prev"&&f.reverse();const x=f.indexOf(a.currentTarget);f=u.loop?Je(f,x+1):f.slice(x+1)}setTimeout(()=>te(f))}})})})});ee.displayName=Z;var qe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ze(t,o){return o!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Qe(t,o,n){const s=ze(t.key,n);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return qe[s]}function te(t,o=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:o}),document.activeElement!==n))return}function Je(t,o){return t.map((n,s)=>t[(o+s)%t.length])}var We=X,Xe=ee,G="Tabs",[Ze,vt]=O(G,[W]),oe=W(),[et,K]=Ze(G),ne=i.forwardRef((t,o)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:l,orientation:c="horizontal",dir:m,activationMode:v="automatic",...u}=t,p=Q(m),[d,g]=q({prop:s,onChange:r,defaultProp:l});return e.jsx(et,{scope:n,baseId:z(),value:d,onValueChange:g,orientation:c,dir:p,activationMode:v,children:e.jsx(E.div,{dir:p,"data-orientation":c,...u,ref:o})})});ne.displayName=G;var se="TabsList",re=i.forwardRef((t,o)=>{const{__scopeTabs:n,loop:s=!0,...r}=t,l=K(se,n),c=oe(n);return e.jsx(We,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:s,children:e.jsx(E.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:o})})});re.displayName=se;var ae="TabsTrigger",ie=i.forwardRef((t,o)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...l}=t,c=K(ae,n),m=oe(n),v=ue(c.baseId,s),u=de(c.baseId,s),p=s===c.value;return e.jsx(Xe,{asChild:!0,...m,focusable:!r,active:p,children:e.jsx(E.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":u,"data-state":p?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:v,...l,ref:o,onMouseDown:C(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?c.onValueChange(s):d.preventDefault()}),onKeyDown:C(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&c.onValueChange(s)}),onFocus:C(t.onFocus,()=>{const d=c.activationMode!=="manual";!p&&!r&&d&&c.onValueChange(s)})})})});ie.displayName=ae;var ce="TabsContent",le=i.forwardRef((t,o)=>{const{__scopeTabs:n,value:s,forceMount:r,children:l,...c}=t,m=K(ce,n),v=ue(m.baseId,s),u=de(m.baseId,s),p=s===m.value,d=i.useRef(p);return i.useEffect(()=>{const g=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(Fe,{present:r||p,children:({present:g})=>e.jsx(E.div,{"data-state":p?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":v,hidden:!g,id:u,tabIndex:0,...c,ref:o,style:{...t.style,animationDuration:d.current?"0s":void 0},children:g&&l})})});le.displayName=ce;function ue(t,o){return`${t}-trigger-${o}`}function de(t,o){return`${t}-content-${o}`}var tt=ne,fe=re,me=ie,pe=le;const ot=tt,xe=i.forwardRef(({className:t,...o},n)=>e.jsx(fe,{ref:n,className:L("inline-flex h-10 items-center justify-center rounded-md bg-muted text-muted-foreground",t),...o}));xe.displayName=fe.displayName;const ve=i.forwardRef(({className:t,...o},n)=>e.jsx(me,{ref:n,className:L("inline-flex items-center justify-center whitespace-nowrap rounded-sm h-full px-3 py-1.5 text-sm font-normal ring-offset-background transition-all border-b-[3px] border-transparent focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:border-b-pry-clr data-[state=active]:text-foreground data-[state=active]:font-semibold",t),...o}));ve.displayName=me.displayName;const be=i.forwardRef(({className:t,...o},n)=>e.jsx(pe,{ref:n,className:L("mt-2 ring-offset-background focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...o}));be.displayName=pe.displayName;function V(){return e.jsx("div",{className:"w-full h-full p-20 flex items-center justify-center bg-white rounded-xl",children:e.jsx("p",{className:"text-sm",children:"There's nothing to see here yet!"})})}function nt(){return e.jsx(V,{})}function st(){return e.jsx(V,{})}function rt(){return e.jsx(V,{})}function at({users:t}){const o=Ie(),n=r=>{navigator.clipboard&&navigator.clipboard.writeText(r).then(()=>A.success("Link copied to clipboard",{id:"copyToast"}))},s=async r=>{const l=localStorage.getItem("business_id")||"",c=JSON.parse(l),m=A.loading("Revoking Access",{id:"revokeToast"});await we.put(`/revoke-access/${r}/`).then(()=>{A.success("Campaign access revoked",{id:m}),o.invalidateQueries({queryKey:["Roles",c]})}).catch(()=>{A.error("Something went wrong. Please retry",{id:m})})};return(t==null?void 0:t.length)>0?e.jsxs(_e,{children:[e.jsx(Me,{children:e.jsxs(Y,{children:[e.jsx(N,{}),e.jsx(N,{children:"Email"}),e.jsx(N,{children:"Campaign"}),e.jsx(N,{children:"Sent Time"}),e.jsx(N,{children:"Access Code"}),e.jsx(N,{children:"Action"})]})}),e.jsx(Pe,{children:t.map((r,l)=>e.jsxs(Y,{children:[e.jsx(S,{children:e.jsx("div",{className:`w-2 h-2 rounded-full ${r.has_access?"bg-green-500":"bg-red-500"}`})}),e.jsx(S,{children:r.email}),e.jsx(S,{children:r.campaign}),e.jsx(S,{children:Re(r.sent_time).format("DD MMM YYYY, HH:MMa")}),e.jsx(S,{children:r.access_code}),e.jsx(S,{children:e.jsxs(ke,{children:[e.jsx(De,{className:"h-auto p-2 w-auto rounded-md text-inherit hover:bg-gray-200",children:e.jsx(Le,{})}),e.jsxs(Oe,{className:"bg-white rounded-md p-2 flex flex-col gap-2 border-[1px] border-neutral-light-clr max-w-max",children:[e.jsx(H,{variant:"outline",size:"sm",className:"font-normal cursor-pointer",onClick:()=>n(r.link),children:"Copy Link"}),r.has_access&&e.jsx(H,{variant:"outline",size:"sm",className:"font-normal cursor-pointer hover:bg-red-600 hover:text-white hover:border-transparent justify-center",onClick:()=>s(r.id),children:"Revoke Access"})]})]})})]},l))})]}):e.jsx(ye,{})}function it(){const{isLoading:t,data:o}=Ne();return t?e.jsx("div",{className:"w-full h-[200px] py-10 flex items-center justify-center bg-white rounded-2xl",children:e.jsx(Se,{})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"rounded-2xl bg-white p-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("span",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Team Overview"}),e.jsx("p",{children:"This is a list of all team members currently onboarded on the platform"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("p",{className:"text-xs",children:"Access Granted"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("p",{className:"text-xs",children:"Access Revoked"})]})]})]}),e.jsx("div",{children:e.jsx(at,{users:o})})]})})}function bt(){const t=[{value:"roles",text:"Roles and Permissions",component:e.jsx(it,{})},{value:"text",text:"Custom Text Body",component:e.jsx(nt,{})},{value:"audio",text:"Upload Audio Recording",component:e.jsx(st,{})},{value:"form",text:"Contact Form",component:e.jsx(rt,{})}];return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{title:"Settings",subtitle:"Customize platform to suit your needs"}),e.jsxs(ot,{defaultValue:"roles",className:"w-full",children:[e.jsx(xe,{className:"w-full bg-transparent border-b-[1px] border-gray-400 rounded-none mb-6",children:t.map((o,n)=>e.jsx(ve,{value:o.value,className:"w-full rounded-none text-[16px]",children:o.text},n))}),t.map((o,n)=>e.jsx(be,{value:o.value,children:o.component},n))]})]})}export{bt as default};
