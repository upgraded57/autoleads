import{z as k,a2 as E,f as L,r as p,a3 as S,j as e,e as U,J as I,B as h,_ as u}from"./index-Dwu-iOUK.js";import{I as m}from"./input-D62eCxPF.js";import{b as P}from"./index-lVw45tfr.js";import{L as D}from"./loader-circle-sHEuQ9bA.js";import"./createLucideIcon-CS6NP1Wv.js";function _(){const{campaign_id:g}=k(),{isLoading:f,data:i}=E(g),j=L(),[r,N]=p.useState({title:"",subtitle:"",btnText:"",redirectUrl:""}),[a,y]=p.useState({fullName:!0,email:!0,phone:!0,location:!1}),[n,C]=p.useState({bgColor:"",inputBg:"",textClr:"",btnText:"",btnBg:""}),c={texts:[{name:"title",id:"formTitle",tag:"Form Title"},{name:"subtitle",id:"formSubitle",tag:"Form Subtitle"},{name:"btnText",id:"formBtnText",tag:"Button Text"},{name:"redirectUrl",id:"formRedirectUrl",tag:"Redirect Url"}],checks:[{name:"fullName",id:"formFullname",tag:"Full Name"},{name:"email",id:"formEmail",tag:"Email Address"},{name:"phone",id:"formPhone",tag:"Phone Number"},{name:"location",id:"formLocation",tag:"Location"}],colors:[{name:"bgColor",id:"formBgColor",tag:"Background Color"},{name:"inputBg",id:"formInputBg",tag:"Input Field Background"},{name:"textClr",id:"formTextClr",tag:"Text Color"},{name:"btnText",id:"formBtnText",tag:"Button Text Color"},{name:"btnBg",id:"formBtnBg",tag:"Button Color"}]},F={styles:{textClr:n.textClr,bodyClr:n.bgColor,btnBG:n.btnBg,btnTextClr:n.btnText,bgClr:n.bgColor,inputBG:n.inputBg},texts:{title:r.title,subtitle:r.subtitle,btnText:r.btnText},fields:[a.email?"email":"",a.fullName?"fullName":"",a.phone?"phone":"",a.location?"location":""],redirect:{url:r.redirectUrl||""}},x=i!=null&&i.design?JSON.parse(i==null?void 0:i.design):{},s=x.texts,B=x.styles,T=x.fields,{mutateAsync:v,isPending:b}=S(),w=()=>{const t=u.loading("Updating form design",{id:"updateToast"});v({campaign_id:g,design:F}).then(()=>{u.success("Form design updated successfully",{id:t}),j("/app/campaigns")}).catch(()=>{u.error("Unable to update form design",{id:t})})};return f?e.jsx("div",{className:"w-full h-screen pb-[200px] grid place-content-center",children:e.jsx(U,{})}):e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-header text-2xl font-semibold",children:"Edit your form"}),e.jsxs(h,{className:"pry-btn gap-2",onClick:w,disabled:b,children:[b&&e.jsx(D,{className:"animate-spin"}),e.jsx(P,{className:"text-lg"})," Complete Editing"]})]}),e.jsxs("div",{className:"wizard-box w-full flex rounded-2xl border-[1px] border-gray-300 mt-6 overflow-hidden",children:[e.jsx("div",{className:"basis-2/3 p-4 overflow-y-scroll flex items-center justify-center min-h-full",children:e.jsxs("div",{className:"w-full max-w-[600px] mx-auto bg-gray-50 px-4 py-8 rounded-lg",children:[e.jsx("h1",{className:"text-header text-xl font-semibold uppercase text-center",children:r.title||(s==null?void 0:s.title)||"form title"}),e.jsx("p",{className:"text-center my-4",children:r.subtitle||(s==null?void 0:s.subtitle)||"Form Subtitle"}),a.fullName&&e.jsxs("label",{className:"block mb-2",children:[e.jsx("p",{children:"Full Name"}),e.jsx(m,{type:"text",disabled:!0,placeholder:"e.g John Doe",className:"bg-transparent border-gray-300"})]}),a.email&&e.jsxs("label",{className:"block mb-2",children:[e.jsx("p",{children:"Email Address"}),e.jsx(m,{type:"text",disabled:!0,placeholder:"e.g johndoe@email.com",className:"bg-transparent border-gray-300"})]}),a.phone&&e.jsxs("label",{className:"block mb-2",children:[e.jsx("p",{children:"Phone Number"}),e.jsx(m,{type:"text",disabled:!0,placeholder:"09011223344",className:"bg-transparent border-gray-300"})]}),a.location&&e.jsxs("label",{className:"block mb-2",children:[e.jsx("p",{children:"Location"}),e.jsx(m,{type:"text",disabled:!0,placeholder:"e.g Lagos, Nigeria",className:"bg-transparent border-gray-300"})]}),e.jsx(h,{disabled:!0,className:"w-full uppercase bg-accent-clr",children:(s==null?void 0:s.btnText)||r.btnText||"call me now"})]})}),e.jsxs("div",{className:"basis-1/3 bg-white p-4 overflow-y-scroll",children:[e.jsx("h1",{className:"text-header text-xl mb-6 font-semibold",children:"Form Settings"}),e.jsx("div",{className:"px-3",children:c.texts.map((t,o)=>e.jsxs("label",{htmlFor:t.id,className:"block my-4",children:[e.jsx("p",{className:"text-sm",children:t.tag}),e.jsx(m,{type:"text",className:"h-8",id:t.id,name:t.name,defaultValue:s[t.name],onChange:l=>N(d=>({...d,[l.target.name]:l.target.value}))})]},o))}),e.jsx("hr",{className:"my-6"}),e.jsx("p",{children:"Check the options below for fields to display"}),e.jsx("div",{className:"px-3",children:c.checks.map((t,o)=>e.jsxs("label",{htmlFor:t.id,className:"flex gap-2 items-center my-2",children:[e.jsx("input",{type:"checkbox",name:t.name,id:t.id,defaultChecked:T[t.name]||a[t.name],onChange:l=>y(d=>({...d,[l.target.name]:l.target.checked}))}),e.jsx("p",{className:"text-sm",children:t.tag})]},o))}),e.jsx("hr",{className:"my-6"}),e.jsx("p",{children:"Edit and customize form aesthetics with the options below"}),e.jsx("div",{className:"px-3",children:c.colors.map((t,o)=>e.jsxs("label",{htmlFor:t.id,className:"flex gap-2 items-center my-2",children:[e.jsx("input",{type:"color",name:t.name,id:t.id,defaultValue:B[t.name]||n[t.name],onChange:l=>C(d=>({...d,[l.target.name]:l.target.value}))}),e.jsx("p",{className:"text-sm",children:t.tag})]},o))})]})]})]})}export{_ as default};
