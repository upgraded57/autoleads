import{_ as t}from"./index-BHPEYUkL.js";import{a as c}from"./axiosInstance-D6jcOrH_.js";import{u as d}from"./useQuery-BxJrOT0q.js";import{b as r,a as g}from"./baseUrl-HwsEoYQ5.js";const w=async(a,e)=>{const s=localStorage.getItem("business_id")||"",o=JSON.parse(s),n=t.loading("Creating campaign");await c({method:"post",url:`${r}/campaign/create/${o}/`,data:{name:a}}).then(i=>{t.success("Campaign name created",{id:n}),e(`/campaigns/new/${i.data.campaign_id}?type=form`)}).catch(()=>{t.error("Something went wrong. Please Retry",{id:n})})},y=async(a,e)=>{const s=t.loading("Uploading File..."),o=localStorage.getItem("business_id")||"",n=JSON.parse(o),i=new FormData;i.append("campaign",a),await c({method:"post",url:`${r}/campaign/upload/${n}/`,data:i}).then(p=>{t.success("File uploaded successfully",{id:s}),e(`/campaigns/new/${p.data.campaign_id}?type=upload`)}).catch(()=>{t.error("Please check the file and retry",{id:s})})},$=async(a,e)=>{const s=t.loading("Creating campaign"),o=localStorage.getItem("business_id")||"",n=JSON.parse(o);await c({method:"post",url:`${r}/campaign/create/${n}/`,data:{name:a}}).then(i=>{t.success("Campaign name created",{id:s}),e(`/campaigns/new/${i.data.campaign_id}?type=sheet`)}).catch(()=>{t.error("Something went wrong. Please Retry",{id:s})})},C=()=>{const a=localStorage.getItem("business_id")||"",e=JSON.parse(a);return d({queryKey:["Campaigns",e],queryFn:async()=>(await c({method:"get",url:`/campaigns/list/${e}/`})).data,staleTime:0})},I=a=>d({queryKey:["Campaign",a],queryFn:async()=>(await c({method:"get",url:`/leads/list/${a}`})).data,staleTime:5*60*1e3}),f=async(a,e,s,o)=>{const n=t.loading("Setting up follow up option");await c.put(`${r}/campaign/add/contact/${a}/`,{contact_option:e==="CALL"?e.toUpperCase():"Sms"}).then(()=>{t.success("Follow up method set",{id:n}),s(`/campaigns/new/${a}/content-type?type=${o}&option=${e}`)}).catch(()=>{t.error("Something went wrong. Please retry",{id:n})})},S=async(a,e,s,o,n)=>{const i=t.loading("Setting content type",{id:"a"});await c.put(`/campaign/content-option/${a}/`,{content_option:s}).then(()=>{t.success("Content type set",{id:i}),s.toLowerCase()==="audio"?n(`/campaigns/new/${a}/${e}/${o.toLowerCase()}`):n(`/campaigns/new/${a}/tts/${e}/${o.toLowerCase()}`)}).catch(()=>{t.error("Something went wrong",{id:i})})},_=async(a,e,s,o)=>{const n=t.loading("Assigning audios to call");await c.put(`campaign/call/create/${e}/`,{audio_link_1:a[0],audio_link_2:a[1],audio_link_3:a[2],audio_link_4:a[3]}).then(()=>{t.success("Audios assigned to calls",{id:n}),s(o==="upload"||o==="sheet"?"/app/campaigns":`/campaigns/new/form/${e}/wizard`)}).catch(()=>{t.error("Something went wrong. Please retry",{id:n})})},b=async(a,e,s,o)=>{const n=t.loading("Assigning audios to call");await c.put(`campaign/call/create/${e}/`,{text_1:a[0],text_2:a[1],text_3:a[2],text_4:a[3]}).then(()=>{t.success("Audios assigned to calls",{id:n}),s(o==="upload"||o==="sheet"?"/app/campaigns":`/campaigns/new/form/${e}/wizard`)}).catch(()=>{t.error("Something went wrong. Please retry",{id:n})})},F=async a=>{const e=t.loading("Launching Campaigns");await c.post(`/campaign/call/launch/${a}/`).then(()=>{t.success("Campaign Started",{id:e})}).catch(()=>{t.error("Something went wrong. Please retry",{id:e})})},L=a=>d({queryKey:["leadInfo",a],queryFn:()=>g({url:`${r}/leads/detail/${a}/`}),select:s=>s.data});export{I as a,L as b,y as c,w as d,$ as e,f,b as g,_ as h,S as i,F as l,C as u};
